# Cursor Rules - Security & Best Practices

## üö® CRITICAL: NEVER COMMIT SENSITIVE INFORMATION

### Absolute Prohibitions

**NEVER commit, stage, or include in any file that will be committed:**

1. **Credentials:**
   - Passwords (e.g., `DGReen@468`, `password123`)
   - API keys (e.g., `G5WuM1eaiVTAyea9ADDpLG3kAvaViR1E`, `sk_live_...`)
   - Tokens (JWT tokens, access tokens, refresh tokens)
   - API secrets
   - Database passwords
   - Encryption keys

2. **Personal Information:**
   - Email addresses used as credentials (e.g., `gautam@digitalgreen.org` if used as login)
   - Usernames when paired with passwords
   - Personal API credentials

3. **Environment Variables with Real Values:**
   - Never commit `.env` files with actual values
   - Never hardcode credentials in code files
   - Never include credentials in README.md examples

### Mandatory Practices

**ALWAYS:**

1. **Use Environment Variables:**
   - Store all credentials in `.env` files (already in `.gitignore`)
   - Reference credentials via `process.env.VARIABLE_NAME`
   - Use Railway/Heroku environment variables for production

2. **Use Placeholders in Documentation:**
   - README examples: `your_username@domain.com`, `your_password_here`
   - Code comments: `// Set via environment variable`
   - Never use real credentials even in examples

3. **Validate Before Committing:**
   - Check `git diff` before every commit
   - Search for common patterns: `password=`, `API_KEY=`, `token=`
   - Verify `.env` is in `.gitignore`
   - Scan for email addresses in commit messages

4. **Git History Hygiene:**
   - Never commit sensitive data, even if planning to remove it later
   - If accidentally committed, immediately use BFG Repo-Cleaner to remove from history
   - Force push only after confirming credentials are removed

### File Patterns to Check

**Before committing, verify these files don't contain credentials:**

- `README.md` - Only placeholders allowed
- `*.env` - Must be in `.gitignore`
- `*.config.js` - Use environment variables
- `package.json` - No credentials in scripts
- `*.md` documentation files - Only examples with placeholders

### Red Flags to Watch For

**If you see these patterns, STOP and remove credentials:**

- `username=.*@.*` followed by `password=`
- `API_KEY=.*[A-Za-z0-9]{20,}`
- `password=.*[A-Za-z0-9@#$%]{6,}`
- `token=.*[A-Za-z0-9]{20,}`
- Email addresses in code (unless clearly public/example)

### Pre-Commit Checklist

**Before every commit, verify:**

- [ ] No `.env` files staged (`git status` should not show `.env`)
- [ ] No hardcoded passwords in code
- [ ] No real credentials in README or documentation
- [ ] All examples use placeholders (`your_username`, `your_password`, `your_api_key`)
- [ ] Environment variables are referenced via `process.env.*`
- [ ] `.gitignore` includes `.env` and sensitive files

### If Credentials Are Accidentally Committed

**IMMEDIATE ACTIONS:**

1. **DO NOT PANIC** - Act quickly but carefully
2. **Remove from current files** - Edit and commit fix immediately
3. **Clean git history** - Use BFG Repo-Cleaner:
   ```bash
   echo "credential_to_remove" > /tmp/credentials.txt
   bfg --replace-text /tmp/credentials.txt
   git reflog expire --expire=now --all
   git gc --prune=now --aggressive
   git push --force --all
   ```
4. **Change credentials** - Rotate passwords/keys immediately
5. **Notify security team** - If applicable

### Code Review Guidelines

**When reviewing code:**

- Scan for hardcoded credentials
- Verify environment variables are used correctly
- Check documentation uses placeholders
- Ensure `.gitignore` includes sensitive files
- Verify no credentials in commit messages

### Project-Specific Rules

**For MCP Servers:**

- All API keys must come from environment variables
- `.env` files must be in `.gitignore`
- README examples must use placeholders
- Railway environment variables for production deployment
- Never commit test credentials

**For Chat Widget:**

- Never commit API keys for OpenAI or other services
- Use environment variables for all external service credentials
- Never hardcode user credentials

## üìù General Best Practices

- Write clear, descriptive commit messages
- Keep commits focused and atomic
- Test before committing
- Review diffs before pushing
- Use meaningful variable names
- Document security considerations

## üîí Security Reminders

- Credentials exposed in git history are permanently accessible
- GitHub scans repositories for exposed secrets
- Always rotate credentials after exposure
- Use strong, unique passwords for each service
- Enable 2FA on all accounts

